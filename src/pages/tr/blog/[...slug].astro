---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import BlogPostEnhanced from '../../../layouts/BlogPostEnhanced.astro';
import type { Lang } from '../../../i18n/translations';

// MDX Components
import ConceptCheck from '../../../components/blog/ConceptCheck.astro';
import VideoEmbed from '../../../components/blog/VideoEmbed.astro';
import PhotoGallery from '../../../components/blog/PhotoGallery.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}

type Props = CollectionEntry<'blog'>;

const lang: Lang = 'tr';
const post = Astro.props;
const { Content, headings } = await render(post);

// MDX components to pass
const components = {
  ConceptCheck,
  VideoEmbed,
  PhotoGallery,
};
---

<BlogPostEnhanced post={post.data} headings={headings} lang={lang} slug={post.id}>
  <Content components={components} />
</BlogPostEnhanced>
